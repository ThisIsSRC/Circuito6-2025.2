<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gincana - Circuito de Quest√µes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2ecc71 0%, #1e8449 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            min-height: 500px;
            padding: 40px;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Tela de Carregamento */
        .loading-container {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 500px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2ecc71;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-container h2 {
            color: #667eea;
            font-size: 24px;
            margin-top: 20px;
        }

        /* Headers */
        h1 {
            color: #2ecc71;
            margin-bottom: 20px;
            font-size: 28px;
        }

        h2 {
            color: #1e8449;
            margin-bottom: 15px;
            font-size: 22px;
        }

        h3 {
            color: #2ecc71;
            margin-bottom: 10px;
            font-size: 18px;
        }

        p, li {
            color: #333;
            line-height: 1.6;
            margin-bottom: 12px;
            font-size: 16px;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        /* Bot√µes */
        button {
            background: linear-gradient(135deg, #2ecc71 0%, #1e8449 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .button-group button {
            flex: 1;
            min-width: 150px;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #999 0%, #666 100%);
        }

        /* Formul√°rios */
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }

        /* Quest√µes */
        .question-page {
            margin-bottom: 20px;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .question-text {
            background: #f5f5f5;
            padding: 20px;
            border-left: 4px solid #667eea;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .options {
            margin: 20px 0;
        }

        .option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .option:hover {
            background-color: #f0f0f0;
        }

        .option input[type="radio"] {
            width: auto;
            margin-right: 12px;
            margin-bottom: 0;
            cursor: pointer;
        }

        .option label {
            margin-bottom: 0;
            cursor: pointer;
            flex: 1;
            font-weight: normal;
        }

        /* Checkbox de Regras */
        .rules-checkbox {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .rules-checkbox input[type="checkbox"] {
            width: auto;
            margin-right: 12px;
            margin-bottom: 0;
            cursor: pointer;
        }

        .rules-checkbox label {
            margin-bottom: 0;
            cursor: pointer;
            font-weight: normal;
        }

        /* C√≥digo de Confirma√ß√£o */
        .code-display {
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
            font-size: 32px;
            font-weight: bold;
            letter-spacing: 5px;
            font-family: monospace;
        }

        .code-input-group {
            margin: 20px 0;
        }

        /* Resumo de Quest√µes */
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .summary-table th,
        .summary-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .summary-table th {
            background: #2ecc71;
            color: white;
            font-weight: bold;
        }

        .summary-table tr:hover {
            background-color: #f5f5f5;
        }

        .answer-badge {
            display: inline-block;
            background: #2ecc71;
            color: white;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
        }

        /* Mensagens de Status */
        .message {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-weight: bold;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .warning-message {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71 0%, #1e8449 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Responsivo */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                min-height: auto;
            }

            h1 {
                font-size: 22px;
            }

            h2 {
                font-size: 18px;
            }

            p, li {
                font-size: 14px;
            }

            button {
                padding: 10px 20px;
                font-size: 14px;
            }

            .code-display {
                font-size: 24px;
                letter-spacing: 3px;
            }

            .button-group {
                flex-direction: column;
            }

            .button-group button {
                width: 100%;
            }
        }

        /* Disabled State */
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        button:disabled:hover {
            box-shadow: none;
        }

        .info-box {
            background: #ebffef;
            border-left: 4px solid #1e8449;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .info-box strong {
            color: #1e8449;
        }

        .rules-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .page-indicator {
            color: #999;
            font-size: 14px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Tela de Carregamento (fora do container) -->
    <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; justify-content: center; align-items: center; z-index: 9999;">
        <div class="loading-container" style="width: 100%;">
            <div class="spinner"></div>
            <h2 style="color: white; margin-top: 20px;">Carregando...</h2>
            <p style="color: white; margin-top: 10px;">Preparando o circuito de quest√µes</p>
        </div>
    </div>

    <div class="container">
        <!-- P√°gina 1: Boas Vindas -->
        <div class="page welcome-page active">
            <h1>üéâ Bem-vindos ao Circuito de Gincana!</h1>
            <p>Ol√°, equipe! Preparados para um desafio emocionante?</p>
            <div class="info-box">
                <strong>‚ÑπÔ∏è Informa√ß√µes do Circuito:</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>Total de Quest√µes:</strong> 40 quest√µes</li>
                    <li><strong>Disciplinas:</strong> 2 disciplinas diferentes</li>
                    <li><strong>Quest√µes por Disciplina:</strong> 20 quest√µes cada</li>
                    <li><strong>Objetivo:</strong> Responder corretamente o m√°ximo de quest√µes poss√≠vel</li>
                </ul>
            </div>
            <p style="margin-top: 30px;">Este circuito testar√° seus conhecimentos em duas disciplinas. Voc√™s ter√£o a oportunidade de responder perguntas de diferentes n√≠veis de dificuldade.</p>
            <button onclick="goToNextPage()">Continuar ‚Üí</button>
        </div>

        <!-- P√°gina 3: Como Funciona -->
        <div class="page how-works-page">
            <h1>Como o Circuito Funciona?</h1>
            <div class="info-box">
                <strong>üìã Passo a Passo:</strong>
                <ol style="margin-top: 10px;">
                    <li>Voc√™ informar√° o nome da sua equipe</li>
                    <li>Escolher√° a disciplina para come√ßar</li>
                    <li>Responder√° 20 quest√µes da primeira disciplina</li>
                    <li>Passar√° para a segunda disciplina com mais 20 quest√µes</li>
                    <li>Poder√° revisar suas respostas antes de enviar</li>
                    <li>Confirmar√° o envio com um c√≥digo de seguran√ßa</li>
                </ol>
            </div>
            <p style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 5px;">
                <strong>‚è±Ô∏è Importante:</strong> N√£o h√° limite de tempo, mas procure responder com aten√ß√£o. Voc√™ poder√° revisar suas respostas antes de confirmar o envio final.
            </p>
            <div class="button-group">
                <button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Voltar</button>
                <button onclick="goToNextPage()">Pr√≥ximo ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 4: Regras e Termos -->
        <div class="page rules-page">
            <h1>üìú Regras e Termos</h1>
            <div class="rules-box">
                <h3>Regras Gerais:</h3>
                <ul>
                    <li>Apenas uma resposta √© permitida por quest√£o</li>
                    <li>Voc√™ pode revisar e alterar suas respostas a qualquer momento antes do envio final</li>
                    <li>O envio final √© irrevers√≠vel</li>
                    <li>Respeite o c√≥digo de √©tica da escola durante o teste</li>
                    <li>N√£o compartilhe suas respostas com outras equipes</li>
                    <li>Todos os membros da equipe devem estar presentes durante o teste</li>
                </ul>
                <h3 style="margin-top: 20px;">Termo de Aceite:</h3>
                <p>
                    Ao marcar "Aceito", voc√™ confirma que sua equipe:
                </p>
                <ul>
                    <li>Compreende todas as regras acima</li>
                    <li>Concorda em participar eticamente</li>
                    <li>Autoriza o registro de suas respostas</li>
                    <li>Aceita os resultados como finais</li>
                </ul>
            </div>

            <div class="rules-checkbox">
                <input type="checkbox" id="termsAccept">
                <label for="termsAccept">Concordo com as regras e aceito os termos</label>
            </div>

            <div class="button-group">
                <button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Voltar</button>
                <button onclick="goToNextPage()" id="acceptBtn" disabled>Aceitar e Continuar ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 5: Nome da Equipe -->
        <div class="page team-name-page">
            <h1>Identifica√ß√£o da Equipe</h1>
            <p>Qual √© o nome da sua equipe? Este nome ser√° registrado nas suas respostas.</p>
            
            <div class="form-group">
                <label for="teamName">Nome da Equipe:</label>
                <input type="text" id="teamName" placeholder="Digite o nome da sua equipe" required>
            </div>

            <div class="message info-box" style="background: #e7f3ff;">
                <strong>üí° Dica:</strong> Escolha um nome criativo que represente sua equipe!
            </div>

            <div class="button-group">
                <button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Voltar</button>
                <button onclick="goToNextPage()" id="teamNameBtn" disabled>Continuar ‚Üí</button>
            </div>
        </div>

        <!-- P√°gina 6: Escolher Disciplina de In√≠cio (removida - ordem fixa Portugu√™s ‚Üí Ingl√™s) -->
        <div class="page discipline-choice-page" style="display: none;">
            <!-- Mantido no DOM apenas para compatibilidade, mas oculto. A ordem ser√°: Portugu√™s -> Ingl√™s -->
        </div>

        <!-- Container para quest√µes da primeira disciplina -->
        <div id="questions-container-1"></div>

        <!-- P√°gina de Mudan√ßa de Disciplina -->
        <div class="page discipline-change-page">
            <h1>üéâ Parab√©ns!</h1>
            <p style="font-size: 18px; margin: 20px 0;">Voc√™ completou todas as quest√µes da primeira disciplina!</p>
            
            <div class="info-box">
                <strong>Pr√≥xima Etapa:</strong>
                <p id="nextDisciplineInfo" style="margin: 10px 0;">Agora voc√™ responder√° as quest√µes da pr√≥xima disciplina.</p>
            </div>

            <p style="margin-top: 30px;">Prepare-se para a pr√≥xima rodada de 20 quest√µes. Boa sorte!</p>

            <button onclick="startSecondDiscipline()">Iniciar Segunda Disciplina ‚Üí</button>
        </div>

        <!-- Container para quest√µes da segunda disciplina -->
        <div id="questions-container-2"></div>

        <!-- P√°gina de Resumo e Confirma√ß√£o -->
        <div class="page review-page">
            <h1>üìã Revise Suas Respostas</h1>
            <p>Confira todas as suas respostas antes de enviar. Depois de confirmar, n√£o ser√° poss√≠vel alterar!</p>

            <div class="progress-bar">
                <div class="progress-fill" id="reviewProgress"></div>
            </div>

            <div id="summaryContent" style="max-height: 400px; overflow-y: auto; margin: 20px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                <!-- Ser√° preenchido via JavaScript -->
            </div>

            <h3>C√≥digo de Seguran√ßa</h3>
            <p>Para enviar, digite o c√≥digo de 5 d√≠gitos mostrado abaixo:</p>
            
            <div class="code-display" id="securityCode">00000</div>

            <div class="code-input-group">
                <label for="codeInput">C√≥digo de Seguran√ßa:</label>
                <input type="text" id="codeInput" placeholder="Digite os 5 d√≠gitos aqui" maxlength="5" pattern="\d{5}">
            </div>

            <div id="codeError" class="message error-message" style="display: none;">
                C√≥digo incorreto! Verifique e tente novamente.
            </div>

            <div class="button-group">
                <button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Voltar</button>
                <button onclick="verifyCodeAndSubmit()" id="submitBtn" disabled>Enviar Respostas</button>
            </div>
        </div>

        <!-- P√°gina de Confirma√ß√£o de Envio -->
        <div class="page confirmation-page">
            <div style="text-align: center;">
                <h1>‚úÖ Envio Realizado com Sucesso!</h1>
                <p style="font-size: 18px; margin: 30px 0;">Suas respostas foram registradas com sucesso.</p>

                <div class="info-box" style="text-align: left;">
                    <h3 style="margin-top: 0;">Resumo do Envio:</h3>
                    <p><strong>Equipe:</strong> <span id="confirmTeamName"></span></p>
                    <p><strong>Primeira Disciplina:</strong> <span id="confirmFirstDisc"></span></p>
                    <p><strong>Segunda Disciplina:</strong> <span id="confirmSecondDisc"></span></p>
                    <p><strong>Total de Quest√µes Respondidas:</strong> <span id="confirmTotalQuestions">40</span></p>
                    <p><strong>Acertos:</strong> <span id="confirmScore">0</span></p>
                    <p><strong>Percentual de Acerto:</strong> <span id="confirmPercentage">0%</span></p>
                    <p><strong>Data e Hora:</strong> <span id="confirmDateTime"></span></p>
                </div>

                <p style="margin-top: 30px; font-size: 16px;">
                    Obrigado por participar da gincana! Seus resultados foram enviados para a planilha de controle.
                </p>

                <div class="message success-message">
                    <strong>üéØ Sua equipe participou com sucesso!</strong>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√£o da API do Google Sheets
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/d/1aO-zVKq91UgVzqUxTZVfWZRBHhJMhU6cVBMG-RZjnXkj9A/useDeveloperUsingGoogleSheets';
        // Voc√™ vai precisar substituir isso com o URL correto do seu Google Apps Script

        // Estados globais
        let currentPage = 0;
        const pages = [];
        let formData = {
            teamName: '',
            firstDiscipline: '',
            secondDiscipline: '',
            answers: {},
            timestamp: ''
        };
        let securityCode = '';

        // Configura√ß√£o das disciplinas dispon√≠veis (primeiro dia: Portugu√™s e Ingl√™s)
        const DISCIPLINES = ['Portugu√™s', 'Ingl√™s'];

        // Dados das quest√µes
        const questions = generateQuestions();

        // Formata texto: transforma trechos entre *asteriscos* em <strong>
        function formatBold(text) {
            if (!text) return '';
            return String(text).replace(/\*(.*?)\*/g, '<strong>$1</strong>');
        }

        function generateQuestions() {
            const questionsData = {};

            // Ingl√™s (20 quest√µes)
            questionsData['Ingl√™s'] = [
                { id: 'ingles_q1', number: 1, text: '‚ÄúThere are ___ apples in the kitchen.‚Äù', options: ['some','any','a','an'], correct_answer: 'A' },
                { id: 'ingles_q2', number: 2, text: '‚ÄúThere aren‚Äôt ___ pencils in my bag.‚Äù', options: ['some','any','much','an'], correct_answer: 'B' },
                { id: 'ingles_q3', number: 3, text: '‚ÄúDo you have ___ brothers or sisters?‚Äù', options: ['some','any','much','many'], correct_answer: 'B' },
                { id: 'ingles_q4', number: 4, text: '‚ÄúI need ___ help with this homework.‚Äù', options: ['some','any','no','many'], correct_answer: 'A' },
                { id: 'ingles_q5', number: 5, text: '‚ÄúShe is ___ (run) in the park now.‚Äù', options: ['run','running','to run','runs'], correct_answer: 'B' },
                { id: 'ingles_q6', number: 6, text: '‚ÄúThey are ___ (play) soccer.‚Äù', options: ['plays','playing','to play','play'], correct_answer: 'B' },
                { id: 'ingles_q7', number: 7, text: '‚ÄúMy mom is ___ (cook) dinner.‚Äù', options: ['cook','cooking','to cook','cooked'], correct_answer: 'B' },
                { id: 'ingles_q8', number: 8, text: '‚ÄúMark likes ___ (swim) in the afternoon.‚Äù', options: ['swiming','swimm','swimming','swim'], correct_answer: 'C' },
                { id: 'ingles_q9', number: 9, text: '‚ÄúThe ___ book is on the table.‚Äù', options: ['Maria','Maria\'s','Marias\'','Marias'], correct_answer: 'B' },
                { id: 'ingles_q10', number: 10, text: '‚ÄúThis is my ___ bag.‚Äù', options: ['sister','sisters','sister\'s','sisters\''], correct_answer: 'C' },
                { id: 'ingles_q11', number: 11, text: '‚ÄúThose are the ___ toys.‚Äù', options: ['boys','boy','boys\'','boy\'s'], correct_answer: 'C' },
                { id: 'ingles_q12', number: 12, text: '‚ÄúThe ___ house is very big.‚Äù', options: ['family','families','family\'s','familys\''], correct_answer: 'C' },
                { id: 'ingles_q13', number: 13, text: '‚ÄúI ___ 12 years old.‚Äù', options: ['am','is','are','be'], correct_answer: 'A' },
                { id: 'ingles_q14', number: 14, text: '‚ÄúThey ___ at school now.‚Äù', options: ['am','is','are','be'], correct_answer: 'C' },
                { id: 'ingles_q15', number: 15, text: '‚ÄúShe ___ a good student.‚Äù', options: ['are','be','am','is'], correct_answer: 'D' },
                { id: 'ingles_q16', number: 16, text: '‚ÄúWe ___ very happy today!‚Äù', options: ['am','is','are','be'], correct_answer: 'C' },
                { id: 'ingles_q17', number: 17, text: '‚ÄúThere are ___ students in the classroom.‚Äù', options: ['any','some','much','no'], correct_answer: 'B' },
                { id: 'ingles_q18', number: 18, text: '‚ÄúThe cat is ___ (sleep) on the sofa.‚Äù', options: ['sleep','sleeping','to sleep','sleeps'], correct_answer: 'B' },
                { id: 'ingles_q19', number: 19, text: '‚ÄúThat is the ___ bike.‚Äù', options: ['Tom','Toms','Tom\'s','Toms\''], correct_answer: 'C' },
                { id: 'ingles_q20', number: 20, text: '‚ÄúIt ___ cold today.‚Äù', options: ['am','are','is','be'], correct_answer: 'C' }
            ];

            // Portugu√™s (20 quest√µes)
            questionsData['Portugu√™s'] = [
                { id: 'portugues_q1', number: 1, text: 'A forma√ß√£o da palavra "empobrecer" se assemelha estruturalmente ao de outra palavra listada abaixo, justamente por exigir a adi√ß√£o simult√¢nea de prefixo e sufixo.', options: ['Desmerece','Invisibilidade','Anoitecer','Irregularmente'], correct_answer: 'C' },
                { id: 'portugues_q2', number: 2, text: 'A palavra "aguardente" √© o resultado de um processo de composi√ß√£o que se caracteriza pela:', options: ['Deriva√ß√£o Parassint√©tica, pois adicionou-se a (prefixo) e ente (sufixo) ao radical guard.','Composi√ß√£o por Justaposi√ß√£o, pois uniu-se √°gua e ardente sem altera√ß√£o fon√©tica significativa.','Deriva√ß√£o Sufixal, a partir do verbo aguardar.','Composi√ß√£o por Aglutina√ß√£o, pela uni√£o dos radicais √°gua e ardente com perda fon√©tica da vogal a.'], correct_answer: 'D' },
                { id: 'portugues_q3', number: 3, text: 'Qual palavra, dentre as op√ß√µes, N√ÉO √© formada pelo processo de Deriva√ß√£o Parassint√©tica, embora possua prefixo e sufixo?', options: ['Desaparecer','Endurecer','Enraizar','Desesperado'], correct_answer: 'D' },
                { id: 'portugues_q4', number: 4, text: 'A alternativa que apresenta um par de palavras formadas EXCLUSIVAMENTE por Composi√ß√£o por Justaposi√ß√£o √©:', options: ['Ponto-final e pernalonga.','Ponto-final e passatempo.','Passatempo e beija-flor.','Per√≠odo e guarda-sol.'], correct_answer: 'B' },
                { id: 'portugues_q5', number: 5, text: 'O processo de forma√ß√£o das palavras "supervis√£o" e "girassol" segue, respectivamente, os processos de:', options: ['Deriva√ß√£o Parassint√©tica e Composi√ß√£o por Aglutina√ß√£o.','Deriva√ß√£o Prefixal e Composi√ß√£o por Justaposi√ß√£o.','Deriva√ß√£o Sufixal e Composi√ß√£o por Aglutina√ß√£o.','Deriva√ß√£o Prefixal e Deriva√ß√£o Parassint√©tica.'], correct_answer: 'B' },
                { id: 'portugues_q6', number: 6, text: 'Qual palavra presente no texto N√ÉO segue a regra de acentua√ß√£o gr√°fica da Proparox√≠tona, embora possua tr√™s ou mais s√≠labas e seja acentuada?', options: ['Cr√≠tica','Obrigat√≥rio','√önicas','Fr√°geis'], correct_answer: 'B' },
                { id: 'portugues_q7', number: 7, text: 'A palavra ox√≠tona presente no texto, que √© acentuada √©:', options: ['Ainda','Cora√ß√£o','Papel','S√≥'], correct_answer: 'D' },
                { id: 'portugues_q8', number: 8, text: 'A palavra do texto que, apesar de parecer uma Proparox√≠tona mas na verdade, √© classificada como Parox√≠tona por conta de um ditongo, √©:', options: ['√önico','S√©rias','Paci√™ncia','Uso'], correct_answer: 'C' },
                { id: 'portugues_q9', number: 9, text: 'Assinale a alternativa que apresenta, respectivamente, uma palavra Parox√≠tona e uma palavra Ox√≠tona, ambas acentuadas devido √† regra de Hiato:', options: ['Re√∫ne e Sa√∫de','Juiz e Instruiu','Ru√≠a e Sa√∫de','Re√∫ne e Sa√∫de'], correct_answer: 'C' },
                { id: 'portugues_q10', number: 10, text: 'No verso "Milhares de gotas de chuva caem", a utiliza√ß√£o da palavra destacada (milhares) provoca um efeito de sentido que se aproxima de:', options: ['Um Numeral Cardinal, pois indica a contagem exata das gotas.','Um Numeral Ordinal, pois indica a posi√ß√£o da gota mais importante.','Um Pronome Pessoal, substituindo o substantivo chuva.','Um Pronome Indefinido, refor√ßando o sentido de uma quantidade n√£o precisa e grandiosa.'], correct_answer: 'D' },
                { id: 'portugues_q11', number: 11, text: 'Em rela√ß√£o √† classifica√ß√£o dos numerais, a palavra "quinze" √© um Numeral Cardinal que, no contexto em que se encontra, exerce a fun√ß√£o morfol√≥gica de:', options: ['Adjetivo, concordando com um substantivo subentendido (n√∫mero).','Substantivo, pois √© precedido de artigo (o) e nomeia o n√∫mero em si.','Pronome Demonstrativo, indicando a posi√ß√£o do n√∫mero na sequ√™ncia.','Numeral Multiplicativo, indicando o aumento de algo.'], correct_answer: 'B' },
                { id: 'portugues_q12', number: 12, text: 'O uso do Numeral Ordinal "Terceira" visa gerar um efeito de sentido de:', options: ['Intensifica√ß√£o, sugerindo que a obra √© triplamente mais valiosa que as anteriores.','Sequ√™ncia e Hierarquia, estabelecendo a posi√ß√£o cronol√≥gica da obra no conjunto da produ√ß√£o do autor.','Fra√ß√£o, indicando que a obra √© apenas uma parte da produ√ß√£o total.','√änfase no car√°ter de novidade da obra.'], correct_answer: 'B' },
                { id: 'portugues_q13', number: 13, text: 'Na frase, o termo "qu√°druplo" √© um Numeral Multiplicativo. Qual das alternativas a seguir apresenta um termo que N√ÉO pode ser classificado como Numeral Multiplicativo, embora tenha forma semelhante?', options: ['S√™xtuplo.','M√∫ltipla (no contexto do texto).','Duplo.','Qu√≠ntuplo.'], correct_answer: 'B' },
                { id: 'portugues_q14', number: 14, text: 'Na an√°lise dos pronomes obl√≠quos √°tonos, o √∫nico pronome que completa o sentido de um verbo √©:', options: ['Lhe (em lhe pediu).','O (em o lia).','Se (em se moveu).','Lhe (em lhe pertencer).'], correct_answer: 'B' },
                { id: 'portugues_q15', number: 15, text: 'Assinale a alternativa em que os dois voc√°bulos destacados s√£o classificados, respectivamente, como Pronome Indefinido e Adv√©rbio de Intensidade:', options: ['Muitos e algu√©m.','Nada e muitos.','Muito e nada.','Muitos e muito.'], correct_answer: 'D' },
                { id: 'portugues_q16', number: 16, text: 'No trecho, a fun√ß√£o do pronome demonstrativo "Esta" √©:', options: ['Retomar e resumir a ideia da conclus√£o j√° citada.','Coer√™ncia, pois estabelece o tempo da conclus√£o.','Antecipar e anunciar a conclus√£o que ser√° apresentada a seguir.','Apontar um elemento que est√° pr√≥ximo do emissor.'], correct_answer: 'C' },
                { id: 'portugues_q17', number: 17, text: 'No di√°logo, a utiliza√ß√£o do pronome possessivo "seu" gera uma ambiguidade de sentido. Assinale a alternativa que indica a dupla de pronomes que poderia ser usada para solucionar a ambiguidade indicando que o carro pertence ao interlocutor:', options: ['Nosso carro.','Carro dele.','Teu carro.','Meu carro.'], correct_answer: 'C' },
                { id: 'portugues_q18', number: 18, text: 'Na an√°lise dos termos destacados, a alternativa que apresenta, respectivamente, um Pronome Pessoal Reto e um Pronome Pessoal Obl√≠quo T√¥nico √©:', options: ['Ningu√©m e eu.','Eu e voc√™.','Mim e n√≥s.','Eu e mim.'], correct_answer: 'D' },
                { id: 'portugues_q19', number: 19, text: 'O pronome obl√≠quo que completa corretamente a frase √©:', options: ['lhe','me','nos','lhes'], correct_answer: 'D' },
                { id: 'portugues_q20', number: 20, text: 'Assinale a alternativa em que o pronome obl√≠quo est√° empregado corretamente.', options: ['O diretor chamou os pais e explicou os tudo com paci√™ncia.','Mariana contou me o que aconteceu na aula.','O professor pediu para que os alunos se organizassem antes de entrar.','Eles disseram que trouxeram os trabalhos e querem mostrar lhe.'], correct_answer: 'C' }
            ];

            return questionsData;
        }

        // Inicializar
        function initialize() {
            setTimeout(() => {
                // Remover tela de carregamento
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                
                initializePages();
                currentPage = 0;
                showPage(0);
            }, 2000);
        }

        function initializePages() {
            pages.length = 0;
            const pageElements = document.querySelectorAll('.page');
            
            pageElements.forEach(page => {
                pages.push(page);
            });
        }

        function showPage(index) {
            // Remover classe active de todas as p√°ginas
            pages.forEach(page => {
                page.classList.remove('active');
            });

            // Adicionar classe active √† p√°gina atual
            if (pages[index]) {
                pages[index].classList.add('active');
                currentPage = index;
                window.scrollTo(0, 0);
            }
        }

        function goToNextPage() {
            // Valida√ß√µes espec√≠ficas antes de avan√ßar
            if (currentPage === 3) { // P√°gina de Regras
                if (!document.getElementById('termsAccept').checked) {
                    alert('Voc√™ precisa aceitar os termos para continuar!');
                    return;
                }
            }

            if (currentPage === 4) { // P√°gina de Nome da Equipe
                const teamName = document.getElementById('teamName').value.trim();
                if (!teamName) {
                    alert('Por favor, insira o nome da sua equipe!');
                    return;
                }
                formData.teamName = teamName;

                // Ordem fixa: Portugu√™s primeiro, Ingl√™s em seguida
                formData.firstDiscipline = 'Portugu√™s';
                formData.secondDiscipline = 'Ingl√™s';

                // Criar p√°ginas de quest√µes e mostrar explicitamente a primeira quest√£o da primeira disciplina
                createQuestionPages();
                setTimeout(() => {
                    showFirstQuestionIn('questions-container-1');
                }, 50);
                return; // j√° navegamos para a primeira quest√£o
            }

            // Avan√ßar p√°gina
            if (currentPage < pages.length - 1) {
                showPage(currentPage + 1);
                updatePageContent();
            }
        }

        function goToPreviousPage() {
            if (currentPage > 0) {
                showPage(currentPage - 1);
                updatePageContent();
            }
        }

        function updatePageContent() {
            // Atualizar conte√∫do espec√≠fico das p√°ginas
            const disciplineChangePage = currentPage === pages.findIndex(p => p.classList.contains('discipline-change-page'));
            if (disciplineChangePage >= 0 && currentPage === disciplineChangePage) {
                document.getElementById('nextDisciplineInfo').textContent = 
                    `Agora voc√™ responder√° as quest√µes de ${formData.secondDiscipline}.`;
            }

            const reviewPageIndex = pages.findIndex(p => p.classList.contains('review-page'));
            if (currentPage === reviewPageIndex) {
                generateSummary();
                generateSecurityCode();
                updateReviewProgress();
            }
        }

        function createQuestionPages() {
            const container1 = document.getElementById('questions-container-1');
            const container2 = document.getElementById('questions-container-2');

            container1.innerHTML = '';
            container2.innerHTML = '';

            // Criar p√°ginas de quest√µes para primeira disciplina
            const firstDisciplineQuestions = questions[formData.firstDiscipline];
            firstDisciplineQuestions.forEach((question, index) => {
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page question-page';
                
                const pageNum = 6 + index; // P√°ginas come√ßam em 6
                pageDiv.innerHTML = `
                    <div class="page-indicator">Quest√£o ${question.number} de 20 - ${formData.firstDiscipline}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${(question.number / 20) * 100}%"></div>
                    </div>

                    <div class="question-number">${formData.firstDiscipline} - Quest√£o ${question.number}</div>
                    
                    <div class="question-text">
                        <p>${formatBold(question.text)}</p>
                    </div>

                    <div class="options">
                        ${question.options.map((option, idx) => {
                            const letter = String.fromCharCode(65 + idx); // A, B, C, D
                            const questionId = question.id;
                            return `
                                <div class="option">
                                    <input type="radio" id="${questionId}_${letter}" name="${questionId}" value="${letter}" 
                                        ${formData.answers[questionId] === letter ? 'checked' : ''}>
                                    <label for="${questionId}_${letter}">${letter}) ${formatBold(option)}</label>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <div class="button-group">
                                ${index > 0 ? '<button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Quest√£o Anterior</button>' : ''}
                                        ${index < firstDisciplineQuestions.length - 1 ? 
                                            '<button onclick="nextQuestion()">Pr√≥xima Quest√£o ‚Üí</button>' : 
                                            '<button onclick="showDisciplineChangePage()">Finalizar Primeira Disciplina ‚Üí</button>'}
                    </div>
                `;

                container1.appendChild(pageDiv);

                // Adicionar listeners para salvar respostas
                const options = pageDiv.querySelectorAll(`input[name="${question.id}"]`);
                options.forEach(option => {
                    option.addEventListener('change', (e) => {
                        formData.answers[question.id] = e.target.value;
                    });
                });
            });

            // Criar p√°ginas de quest√µes para segunda disciplina
            const secondDisciplineQuestions = questions[formData.secondDiscipline];
            secondDisciplineQuestions.forEach((question, index) => {
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page question-page';
                
                pageDiv.innerHTML = `
                    <div class="page-indicator">Quest√£o ${question.number} de 20 - ${formData.secondDiscipline}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${(question.number / 20) * 100}%"></div>
                    </div>

                    <div class="question-number">${formData.secondDiscipline} - Quest√£o ${question.number}</div>
                    
                    <div class="question-text">
                        <p>${formatBold(question.text)}</p>
                    </div>

                    <div class="options">
                        ${question.options.map((option, idx) => {
                            const letter = String.fromCharCode(65 + idx); // A, B, C, D
                            const questionId = question.id;
                            return `
                                <div class="option">
                                    <input type="radio" id="${questionId}_${letter}" name="${questionId}" value="${letter}"
                                        ${formData.answers[questionId] === letter ? 'checked' : ''}>
                                    <label for="${questionId}_${letter}">${letter}) ${formatBold(option)}</label>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <div class="button-group">
                        ${index > 0 ? '<button class="btn-secondary" onclick="goToPreviousPage()">‚Üê Quest√£o Anterior</button>' : ''}
                        ${index < secondDisciplineQuestions.length - 1 ? 
                            '<button onclick="nextQuestion()">Pr√≥xima Quest√£o ‚Üí</button>' : 
                            '<button onclick="showReviewPage()">Ir para Revis√£o ‚Üí</button>'}
                    </div>
                `;

                container2.appendChild(pageDiv);

                // Adicionar listeners para salvar respostas
                const options = pageDiv.querySelectorAll(`input[name="${question.id}"]`);
                options.forEach(option => {
                    option.addEventListener('change', (e) => {
                        formData.answers[question.id] = e.target.value;
                    });
                });
            });

            // Re-inicializar pages array ap√≥s criar quest√µes
            setTimeout(initializePages, 0);
        }

        // Mostra a primeira quest√£o dentro de um container (por id)
        function showFirstQuestionIn(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return -1;
            const firstQuestion = container.querySelector('.page.question-page');
            if (!firstQuestion) return -1;
            initializePages();
            const idx = pages.indexOf(firstQuestion);
            if (idx >= 0) showPage(idx);
            return idx;
        }

        function showDisciplineChangePage() {
            initializePages();
            const idx = pages.findIndex(p => p.classList && p.classList.contains('discipline-change-page'));
            if (idx >= 0) showPage(idx);
        }

        function startSecondDiscipline() {
            // mostra a primeira quest√£o do segundo container
            showFirstQuestionIn('questions-container-2');
        }

        function showReviewPage() {
            initializePages();
            const idx = pages.findIndex(p => p.classList && p.classList.contains('review-page'));
            if (idx >= 0) showPage(idx);
        }

        // Avan√ßa para a pr√≥xima p√°gina de quest√£o (ignora outras p√°ginas)
        function nextQuestion() {
            initializePages();
            // encontrar o √≠ndice atual nos pages
            const curr = currentPage;
            // procurar pelo pr√≥ximo elemento que tem a classe question-page
            for (let i = curr + 1; i < pages.length; i++) {
                const p = pages[i];
                if (p && p.classList && p.classList.contains('question-page')) {
                    showPage(i);
                    return;
                }
            }
            // se n√£o houver pr√≥ximo question-page, tentar avan√ßar para a disciplina-change ou review conforme contexto
            const nextDisciplineIdx = pages.findIndex(p => p.classList && p.classList.contains('discipline-change-page'));
            if (nextDisciplineIdx >= 0 && curr < nextDisciplineIdx) {
                showPage(nextDisciplineIdx);
                return;
            }
            const reviewIdx = pages.findIndex(p => p.classList && p.classList.contains('review-page'));
            if (reviewIdx >= 0) showPage(reviewIdx);
        }

        function generateSecurityCode() {
            securityCode = Math.floor(10000 + Math.random() * 90000).toString();
            document.getElementById('securityCode').textContent = securityCode;
            document.getElementById('codeInput').value = '';
            document.getElementById('codeError').style.display = 'none';
        }

        function generateSummary() {
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = '';

            let answered = 0;
            let correctAnswers = 0;

            // Primeira disciplina
            let html = `<h3>${formData.firstDiscipline}</h3>`;
            for (let i = 1; i <= 20; i++) {
                const questionId = `${formData.firstDiscipline.toLowerCase()}_q${i}`;
                const answer = formData.answers[questionId];
                if (answer) {
                    answered++;
                }
                html += `
                    <div style="padding: 8px; border-bottom: 1px solid #eee;">
                        <strong>Quest√£o ${i}:</strong> 
                        ${answer ? `<span class="answer-badge">${answer}</span>` : '<span style="color: #999;">N√£o respondida</span>'}
                    </div>
                `;
            }

            // Segunda disciplina
            html += `<h3 style="margin-top: 20px;">${formData.secondDiscipline}</h3>`;
            for (let i = 1; i <= 20; i++) {
                const questionId = `${formData.secondDiscipline.toLowerCase()}_q${i}`;
                const answer = formData.answers[questionId];
                if (answer) {
                    answered++;
                }
                html += `
                    <div style="padding: 8px; border-bottom: 1px solid #eee;">
                        <strong>Quest√£o ${20 + i}:</strong> 
                        ${answer ? `<span class="answer-badge">${answer}</span>` : '<span style="color: #999;">N√£o respondida</span>'}
                    </div>
                `;
            }

            summaryContent.innerHTML = html;
            document.getElementById('reviewProgress').style.width = `${(answered / 40) * 100}%`;
        }

        function updateReviewProgress() {
            let answered = Object.keys(formData.answers).length;
            const percentage = (answered / 40) * 100;
            document.getElementById('reviewProgress').style.width = `${percentage}%`;
        }

        function verifyCodeAndSubmit() {
            const inputCode = document.getElementById('codeInput').value;
            
            if (inputCode !== securityCode) {
                document.getElementById('codeError').style.display = 'block';
                return;
            }

            // Simular envio para Google Sheets
            submitToGoogleSheets();
        }

        function submitToGoogleSheets() {
            // Gerar timestamp
            const now = new Date();
            formData.timestamp = now.toLocaleString('pt-BR');

            // Contar acertos (simulado - voc√™ precisa implementar com as respostas corretas)
            let correctCount = 0;
            const allQuestions = [...questions[formData.firstDiscipline], ...questions[formData.secondDiscipline]];
            
            for (let question of allQuestions) {
                if (formData.answers[question.id] === question.correct_answer) {
                    correctCount++;
                }
            }

            // Preparar dados para envio
            const dataToSubmit = {
                teamName: formData.teamName,
                firstDiscipline: formData.firstDiscipline,
                secondDiscipline: formData.secondDiscipline,
                totalQuestions: 40,
                correctAnswers: correctCount,
                percentage: ((correctCount / 40) * 100).toFixed(2),
                timestamp: formData.timestamp,
                answers: JSON.stringify(formData.answers)
            };

            // Enviar para Google Sheets via fetch
            const scriptUrl = 'https://script.google.com/macros/d/1aO-zVKq91UgVzqUxTZVfWZRBHhJMhU6cVBMG-RZjnXkj9A/useDeveloperUsingGoogleSheets';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                body: new FormData(new Blob([JSON.stringify(dataToSubmit)]), 'application/json')
            }).then(() => {
                console.log('Dados enviados com sucesso');
                showConfirmationPage(correctCount);
            }).catch(error => {
                console.error('Erro ao enviar:', error);
                // Mesmo com erro, mostrar confirma√ß√£o (dados podem ter sido salvos)
                showConfirmationPage(correctCount);
            });
        }

        function showConfirmationPage(correctCount) {
            const percentage = ((correctCount / 40) * 100).toFixed(2);
            
            document.getElementById('confirmTeamName').textContent = formData.teamName;
            document.getElementById('confirmFirstDisc').textContent = formData.firstDiscipline;
            document.getElementById('confirmSecondDisc').textContent = formData.secondDiscipline;
            document.getElementById('confirmScore').textContent = correctCount;
            document.getElementById('confirmPercentage').textContent = percentage + '%';
            document.getElementById('confirmDateTime').textContent = formData.timestamp;

            const reviewPageIndex = pages.findIndex(p => p.classList.contains('review-page'));
            const confirmPageIndex = pages.findIndex(p => p.classList.contains('confirmation-page'));
            
            currentPage = confirmPageIndex;
            showPage(confirmPageIndex);
        }

        // Validar entrada do formul√°rio de Regras
        document.addEventListener('change', function(e) {
            if (e.target.id === 'termsAccept') {
                document.getElementById('acceptBtn').disabled = !e.target.checked;
            }
        });

        // Validar entrada do formul√°rio de Nome da Equipe
        document.addEventListener('input', function(e) {
            if (e.target.id === 'teamName') {
                document.getElementById('teamNameBtn').disabled = !e.target.value.trim();
            }

            if (e.target.id === 'codeInput') {
                const code = e.target.value;
                document.getElementById('submitBtn').disabled = code.length !== 5;
            }
        });

        // Validar Disciplina e atualizar segunda
        function updateSecondDiscipline() {
            const firstDiscipline = document.getElementById('firstDiscipline').value;
            const secondDiscipline = DISCIPLINES.find(d => d !== firstDiscipline);
            document.getElementById('secondDiscipline').value = secondDiscipline || '';
            
            document.getElementById('disciplineBtn').disabled = !firstDiscipline;
        }

        // Iniciar quando p√°gina carregar
        window.addEventListener('load', initialize);
    </script>
</body>
</html>
